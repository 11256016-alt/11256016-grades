<style>
body { font-family: '微軟正黑體', Arial; background: #faf9fc; }
h2 { color: #9223b8; border-bottom: 2px solid #9223b8; padding-bottom: 8px; margin-top: 32px;}
h3 { color: #9223b8; margin-top: 28px; }
.wrap-main {
    max-width: 570px; margin: 38px auto 0 auto;
    background: #f7f0fa; border: 3px solid #cba4f5; border-radius: 20px;
    box-shadow: 0 6px 22px #ebddfa; padding: 38px 40px 30px 40px;
}
.nav-btns {
    margin-bottom: 28px; 
    display: flex; 
    gap: 18px; 
    justify-content: center; /* 置中 */
}
.nav-btns button, input[type="submit"], button[type="submit"], .admin-link-btn {
    background: #9223b8; color: #fff; border: 2px solid #cba4f5; padding: 12px 30px; border-radius: 8px;
    font-weight: bold; font-size: 17px; cursor: pointer;
    box-shadow: 0 2px 12px #dac6eb; transition: background 0.2s, border-color 0.2s;
    margin: 0 4px 0 0; display: inline-block;
}
.nav-btns button:hover, input[type="submit"]:hover, button[type="submit"]:hover, .admin-link-btn:hover { background: #a749d1; border-color: #7e379c;}
.msg-error { color:red; font-weight:bold; margin:10px 0 14px 0; border-bottom: 2px dashed #ea7ae3; padding-bottom: 4px;}
table { border-collapse: collapse; margin-bottom: 18px; margin-top: 12px;}
th, td { border: 2px solid #9223b8; padding: 8px 17px; text-align: center;}
th { background: #ede7f6; color: #7e379c; }
.back-link {
    margin-top: 26px; color: #9223b8; text-decoration: underline; font-size: 15px;
    display: inline-block; font-weight: bold;
}
form { display:inline; }
.admin-link-btn {
    margin: 32px auto 0 auto; background: #9223b8; color: #fff; border: 2px solid #cba4f5; padding: 10px 34px;
    border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer; box-shadow: 0 3px 18px #dac6eb;
    display: block; text-align: center; transition: background 0.2s, border-color 0.2s;
}
</style>

<div class="wrap-main">
    <div class="nav-btns">
        <form action="{% url 'score_main' student_id %}" method="get">
            <button type="submit">成績主頁</button>
        </form>
        <form action="{% url 'enroll_ops' student_id %}" method="get">
            <button type="submit">選退課</button>
        </form>
        <form action="{% url 'course_add' %}" method="get">
            <button type="submit">新增課程</button>
        </form>
    </div>

    <h2>{{ student.name }}的加選退選課程</h2>
    {% if msg %}
        <div class="msg-error">{{ msg }}</div>
    {% endif %}

    <h3>已選課程</h3>
    <table>
      <tr><th>課名</th><th>期中分數</th><th>期末分數</th><th>操作</th></tr>
      {% for e in enrollments %}
      <tr>
        <td>{{ e.course.name }}</td>
        <td>{{ e.midterm_score }}</td>
        <td>{{ e.final_score }}</td>
        <td>
          <form method="post" style="display:inline;">
            {% csrf_token %}
            <button type="submit" name="drop_course" value="{{ e.course.id }}">退選</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">尚無選課</td></tr>
      {% endfor %}
    </table>

    <h3>可加選課程</h3>
    <form method="post">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit" name="add_course">加選</button>
    </form>

    <a class="back-link" href="{% url 'score_main' student_id %}">返回成績主頁</a>
    <a href="/admin/" class="admin-link-btn">回到管理後台</a>
</div>
